---
phase: 20-one-click-cloud-deploy
plan: 04
type: research
wave: 1
depends_on:
  - 20-03
files_modified:
  - infra/aws/cloudformation/opencode-cloud-quick.yaml
  - docs/deploy/aws.md
autonomous: true

must_haves:
  truths:
    - "NAT gateway requirements and costs are documented with alternatives"
    - "Template supports future customization without breaking the default path"
  artifacts:
    - path: "infra/aws/cloudformation/opencode-cloud-quick.yaml"
      provides: "NAT gateway provisioning and routing strategy"
    - path: "docs/deploy/aws.md"
      provides: "Operational guidance and cost notes"
---

<objective>
Investigate optimization and customization options for outbound connectivity
in the AWS quick deploy, including NAT gateway cost tradeoffs and alternatives.

Purpose: Ensure outbound access is reliable while minimizing costs for users.
Output: Clear recommendations and follow-up tasks for optional NAT strategies.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-one-click-cloud-deploy/20-CONTEXT.md
@infra/aws/cloudformation/opencode-cloud-quick.yaml
@docs/deploy/aws.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Evaluate NAT gateway customization</name>
  <files>infra/aws/cloudformation/opencode-cloud-quick.yaml</files>
  <action>
Identify feasible options for:
- Using an existing NAT gateway.
- Switching to a NAT instance for lower cost.
- Supporting private egress via VPC endpoints.
Document tradeoffs and prerequisites.
  </action>
  <verify>
Proposed options include cost and operational impact notes.
  </verify>
  <done>
Clear recommendation list ready for implementation work.
  </done>
</task>

<task type="auto">
  <name>Task 2: Document cost and connectivity guidance</name>
  <files>docs/deploy/aws.md</files>
  <action>
Add guidance on NAT gateway costs, when to use alternatives, and how to verify
egress (routes, NAT gateway, and SG/NACLs).
  </action>
  <verify>
Docs explain why outbound access is required and the cost tradeoffs.
  </verify>
  <done>
Users understand connectivity requirements and cost implications.
  </done>
</task>

</tasks>
